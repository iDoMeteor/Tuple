￼Mathematical model of the game Total in the deck ­ 81 card, for its formation there are used the following four parmeters: shape, color, fill style, the amount of figures on the card (3 options for each).

So, we can describe each card using these 4 parameters. Because of each parameter of each card has 3 possible options, then to describe these cards and for numeration of these cards in the deck, we can use ternary system (the basis is 3); for this we enumerate from 0 to 2 to match these options. For example, the following parameters were chosen to create a deck: ￼￼￼￼￼￼￼￼￼shape ￼color ￼￼￼￼￼fill style ￼￼amount

That means that we can create indexes for the cards using short numbers based on the table above. ­ This card can be presented as four numbers (0, 2, 1, 2). To make it easy and convenient to work with a generator of the set's chain of card we can use now these uniquely numbered four numbers from 0 to 80 (81 at all). For this we use the numeral system on the basis of 3: (0;2;1;2)⇔02123 =0212 =0∙33 +2∙32 +1 ∙31 +2 ∙30 =23 As you can see, this card has serial number (index) = 23. The usage of such positional numeric system with basis 3 (TERNARY SYSTEM) makes possible to determine the probability of situations where the selection of 12 cards may bring the game TO THE END (even in the very beginning of the game, at the initial selection of 12 cards); so, to prevent this we'll need to use an additional algorithm (for checking of the cards which are chosen to appear). In fact, the index of each card contains the full information about this concrete card. Generation of "pair" for a random selected card and correctly collected triples (set). For any card from 81 in the deck, we ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼ ￼can choose only 16 cards, which attributes will not match this concrete chosen card. A "Pair" of two cards will be such two cards, no attribute of which coincides (speaking to numbers – the corresponding figures from categories of indexes of cards doesn't match IN TERNARY SYSTEM). Here is described the way to generate a "pair" for any selected card. Let it be that our card has a code: a=a3 33 +a232 +a131 +a030 =a3a2a1a0 , ai ={0,1,2}. Let's choose a number from k ∈ [0; 7] and write it down in binaryform: k=k323 +k222 +k121 +k020 ,ki ={0,1}. Let's form numbers b and c , which are "pairs" for the number a : b = b3b2b1b0, bi = ((ai +ki +1)mod3)=|3−(ai +ki +1)| c = c3c2c1c0, ci = ((ai +2 −ki)mod3)=|3−(ai +2−ki)| The resulted triple a,b,c – is a CORRECT threesome (set) of cards. Checking whether the matching of these three cards (set) is correct.​If we add to the "pair" of the two cards a third, then ­ if the sum of all three indexes of three cards equals to 120 – so, all three cards have different attributes (any of two cards does not share the attribute of the third card), otherwise the third card has at least one attribute that coincides with another from these already shown two cards. Explanation "Why the sum should equal 120". Returning to the presentation of the indexes of cards in the system on the basis of 3, ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼ ￼if all three cards have different attributes, then adding them to each digit must obtain number 3: a+b+c= ∑3 (aj +bj +cj)∙3j = j=0 = ∑3 3∙3j =3∙33 +3∙32 +3∙31 +3∙30 =120. j=0 Based on the described above, when we already select a "pair" of cards, the third card is determined UNIQUELY for the formation of the correct "triple" (set) of cards. During an exchange of information about cards with the server, it will be enough to send only the index of the appeared (selected) card (instead of 4 parameters) that describes each card. The usage of the described above theory allows us to construct a table of all "pairs" of cards with 81⋅16 = 1296 elements (cells). One more note, if we take for any of 81cards a (second card) "pair"­maker from 16 possible from the table ... then among these 16 "pair"­makers is also a third card for the correct formation of the triple of cards (set). Also I created and added the image (graphical_interpretation.png), which presents the graphical interpretation of "pairs" of cards, where we can see a perfectly circular and fractal structure.
